"use strict";(self.webpackChunksrc=self.webpackChunksrc||[]).push([[1886],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var a=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var u=a.createContext({}),l=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,s=e.mdxType,r=e.originalType,u=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=l(n),f=s,m=d["".concat(u,".").concat(f)]||d[f]||p[f]||r;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function f(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var r=n.length,i=new Array(r);i[0]=d;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o.mdxType="string"==typeof e?e:s,i[1]=o;for(var l=2;l<r;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},751:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var a=n(7462),s=(n(7294),n(3905));const r={sidebar_position:11},i="useEffect",o={unversionedId:"useEffect",id:"useEffect",title:"useEffect",description:"Data fetching, setting up a subscription, and manually changing the DOM in React components are all examples of side effects.",source:"@site/docs/09-useEffect.md",sourceDirName:".",slug:"/useEffect",permalink:"/react-basic-study-202103/docs/useEffect",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/09-useEffect.md",tags:[],version:"current",sidebarPosition:11,frontMatter:{sidebar_position:11},sidebar:"tutorialSidebar",previous:{title:"9-useEffect",permalink:"/react-basic-study-202103/docs/useEffect-by-Juno-"},next:{title:"useMemo\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc5f0\uc0b0\ud55c \uac12 \uc7ac\uc0ac\uc6a9\ud558\uae30",permalink:"/react-basic-study-202103/docs/useMemo-Bohyun-"}},u={},l=[{value:"Effect Without Cleanup",id:"effect-without-cleanup",level:2},{value:"Effects with Cleanup",id:"effects-with-cleanup",level:2},{value:"Tips for Using Effects",id:"tips-for-using-effects",level:2}],c={toc:l};function p(e){let{components:t,...n}=e;return(0,s.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"useeffect"},"useEffect"),(0,s.kt)("p",null,"Data fetching, setting up a subscription, and manually changing the DOM in React components are all examples of side effects."),(0,s.kt)("p",null,"\ub370\uc774\ud130 \uac00\uc838\uc624\uae30, \uad6c\ub3c5(subscription) \uc124\uc815\ud558\uae30, \uc218\ub3d9\uc73c\ub85c \ub9ac\uc561\ud2b8 \ucef4\ud3ec\ub10c\ud2b8\uc758 DOM\uc744 \uc218\uc815\ud558\ub294 \uac83\uae4c\uc9c0 \uc774 \ubaa8\ub4e0 \uac83\uc774 side effects\uc785\ub2c8\ub2e4."),(0,s.kt)("p",null,"There are two common kinds of side effects in React components: those that don\u2019t require cleanup, and those that do."),(0,s.kt)("p",null,"\uc774\ub7ec\ud55c side effect\ub97c \ud06c\uac8c \ub450\uac00\uc9c0\ub85c \ubd84\ub958 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4 : clean up \uc774 \ud544\uc694\ud55c \uac83\uacfc \ud544\uc694\ud558\uc9c0 \uc54a\uc740 \uac83!"),(0,s.kt)("h2",{id:"effect-without-cleanup"},"Effect Without Cleanup"),(0,s.kt)("p",null,"Network requests, manual DOM mutations, and logging are common examples of effects that don\u2019t require a cleanup. We say that because we can run them and immediately forget about them. "),(0,s.kt)("p",null,"\ub124\ud2b8\uc6cc\ud06c \ub9ac\ud018\uc2a4\ud2b8, DOM \uc218\ub3d9 \uc870\uc791, \ub85c\uae45 \ub4f1\uc740 \uc815\ub9ac(clean-up)\uac00 \ud544\uc694 \uc5c6\ub294 \uacbd\uc6b0\ub4e4\uc785\ub2c8\ub2e4. \uc774\ub7ec\ud55c \uc608\ub4e4\uc740 ",(0,s.kt)("strong",{parentName:"p"},"\uc2e4\ud589 \uc774\ud6c4 \uc2e0\uacbd \uc4f8 \uac83\uc774 \uc5c6\uae30")," \ub54c\ubb38\uc785\ub2c8\ub2e4. "),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"logging(\ub85c\uae45) \uc774\ub780?"),(0,s.kt)("p",{parentName:"blockquote"},"\uc2dc\uc2a4\ud15c \ub3d9\uc791 \uc2dc \uc2dc\uc2a4\ud15c \uc0c1\ud0dc/\uc791\ub3d9 \uc815\ubcf4\ub97c \uc2dc\uac04\uc758 \uacbd\uacfc\uc5d0 \ub530\ub77c \uae30\ub85d\ud558\ub294 \uac83\uc744 \ub85c\uae45\uc774\ub77c\uace0 \ud558\uace0, \uadf8 \uae30\ub85d\uc744 \ub85c\uadf8\ub77c\uace0 \ud569\ub2c8\ub2e4.")),(0,s.kt)("p",null,"In React class components, the render method itself shouldn\u2019t cause side effects. It would be too early. "),(0,s.kt)("p",null,"\ud074\ub798\uc2a4 \ucef4\ud3ec\ub10c\ud2b8\uc5d0\uc11c\uc758 render\ud568\uc218 \uc790\uccb4\ub85c\ub294 side effect\ub97c \uc2e4\ud589 \uc2dc\ud0ac \uc218\uac00 \uc5c6\uc5b4\uc694. \uc6b0\ub9ac\uac00 \uc6d0\ud558\ub294 \uac74 React\uac00 DOM\uc744 \ub2e4 \uc5c5\ub370\uc774\ud2b8 \uc2dc\ud0a4\uace0 (side)effect\uac00 \uc2e4\ud589\ub418\uae30\ub97c \uc6d0\ud558\ub294 \ub370 \uadf8\uac8c \uc548\ub418\uace0 \ub108\ubb34 \ube68\ub9ac \uc2e4\ud589\ub418\uc5b4 \ubc84\ub9b4\uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,s.kt)("p",null,"This is why in React classes, we put side effects into ",(0,s.kt)("inlineCode",{parentName:"p"},"componentDidMount")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"componentDidUpdate"),"."),(0,s.kt)("p",null,"\uadf8\ub798\uc11c \ud074\ub798\uc2a4 \ucef4\ud3ec\ub10c\ud2b8\ub294 Lifecycle Methods\ub4e4\uc744 \uc774\uc6a9\ud574\uc11c side effect\ub97c \uc2e4\ud589\uc2dc\ud0b5\ub2c8\ub2e4."),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/75834421/112738108-4bdabe00-8fa3-11eb-832d-43ba91770688.png",alt:"image"})),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"React\uacf5\uc2dd \ubb38\uc11c\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 Lifecycle diagram. "),(0,s.kt)("ul",{parentName:"blockquote"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Mounting : adding nodes to the DOM (\ucc98\uc74c\uc73c\ub85c render \ud568\uc218\ub97c \uc2e4\ud589\ud558\ub294 \uac70\ub77c\uace0 \uc0dd\uac01\ud558\uba74 \ub428)")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Unmounting : removing nodes from the DOM (mount \ub418\uc5c8\ub358 nodes \ub4e4\uc744 \uc5c6\uc560\ub294 \uac83)")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"Re-rendering or Updating : making changes to nodes already in the DOM (\uc6d0\ub798 \uc788\ub358 node\ub97c \uc5c5\ub370\uc774\ud2b8 \uc2dc\ud0a4\ub294 \uac83 = rerendering)")))),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"class component with lifecycle methods")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"class Example extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: 0\n    };\n  }\n\n  componentDidMount() {\n    document.title = `You clicked ${this.state.count} times`;\n  }\n  componentDidUpdate() {\n    document.title = `You clicked ${this.state.count} times`;\n  }\n\n  render() {\n    return (\n      <div>\n        <p>You clicked {this.state.count} times</p>\n        <button onClick={() => this.setState({ count: this.state.count + 1 })}>\n          Click me\n        </button>\n      </div>\n    );\n  }\n}\n")),(0,s.kt)("p",null,"\ud83d\udc40 This is because in many cases we want to perform the same side effect regardless of whether the component just mounted, or if it has been updated. Conceptually, we want it to happen after every render \u2014 but React class components don\u2019t have a method like this."),(0,s.kt)("p",null,"\uc800\ud76c\uac00 \uc6d0\ud558\ub294 \uac74 mount\ub4e0 \uc5c5\ub370\uc774\ud2b8 \ub420 \ub54c\ub4e0, render\ud568\uc218\uac00 \uc2e4\ud589\ub420 \ub54c\ub9c8\ub2e4 side effect\uac00 \uc2e4\ud589\ub418\uae38 \uc6d0\ud558\ub294\ub370 \ud074\ub798\uc2a4 \ucef4\ud3ec\ub10c\ud2b8\uc5d0\ub294 \uc774\ub7ec\ud55c \ud568\uc218\uac00 \uc5c6\uc5b4\uc11c \uc774\ub807\uac8c \ub611\uac19\uc740 side effect\ub97c \ub2e4\ub978 \ud568\uc218\uc5d0\uc11c \ub450\ubc88\uc529 \uc120\uc5b8\ud574\uc57c \ud569\ub2c8\ub2e4\ud83d\ude25"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"useEffect"))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"import React, { useState, useEffect } from 'react';\n\nfunction Example() {\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    document.title = `You clicked ${count} times`;\n  });\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>\n        Click me\n      </button>\n    </div>\n  );\n}\n")),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("strong",{parentName:"p"},"What does useEffect do?")," ",(0,s.kt)("inlineCode",{parentName:"p"},"useEffect"),'\ub294 React\ud55c\ud14c "render\ud568\uc218 \uc2e4\ud589 \uc774\ud6c4\uc5d0 \uc5ec\uae30 \uc120\uc5b8\ub41c side effect(\uc704\uc758 \uc608\uc5d0\uc120 documents.title) \ub97c \uc2e4\ud589\uc2dc\ucf1c\uc918" \ub77c\uace0 \ub9d0\ud569\ub2c8\ub2e4. React\ub294 \uc774 side effect\ub97c \uae30\uc5b5\ud558\uace0 DOM\uc744 \uc5c5\ub370\uc774\ud2b8 \uc2dc\ud0a8 \ud6c4 \uc2e4\ud589\uc2dc\ud0b5\ub2c8\ub2e4. ')),(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("p",{parentName:"li"},(0,s.kt)("strong",{parentName:"p"},"Why is ",(0,s.kt)("inlineCode",{parentName:"strong"},"useEffect")," called inside a component?"),"  ",(0,s.kt)("inlineCode",{parentName:"p"},"useEffect"),"\ub97c component\uc548\uc5d0 \ub450\ub294 \uc774\uc720\ub294 \uc704\uc758 \uc608\uc81c\uc5d0\uc11c ",(0,s.kt)("inlineCode",{parentName:"p"},"count"),"\uac19\uc740 state variable\uc5d0 \ubc14\ub85c \uc811\uadfc\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4. "),(0,s.kt)("blockquote",{parentName:"li"},(0,s.kt)("p",{parentName:"blockquote"},"\u2753 Javascript \uc5d0\uc11c\uc758 closure \u2753 closure\ub294 \ud568\uc218\uc640 \ud568\uc218\uac00 \uc120\uc5b8\ub41c \uc5b4\ud718\uc801 \ud658\uacbd\uc758 \uc870\ud569\uc785\ub2c8\ub2e4. \uc774 \ud658\uacbd\uc740 \ud074\ub85c\uc800\uac00 \uc0dd\uc131\ub41c \uc2dc\uc810\uc758 \uc720\ud6a8 \ubc94\uc704 \ub0b4\uc5d0 \uc788\ub294 \ubaa8\ub4e0 \uc9c0\uc5ed \ubcc0\uc218\ub85c \uad6c\uc131\ub429\ub2c8\ub2e4. \uc774\ub7ec\ud55c javascript closure\uae30\ub2a5\uc744 hook \uc774 \uac00\uc9c0\uace0 \uc788\uc74c\uc73c\ub85c\uc368 ",(0,s.kt)("inlineCode",{parentName:"p"},"useEffect"),"\uac00 \uc2e4\ud589\ub420 \ub54c\ub9c8\ub2e4 \uc5c5\ub370\uc774\ud2b8\ub41c ",(0,s.kt)("inlineCode",{parentName:"p"},"count"),"\ub97c \ucc38\uc870 \ud560 \uc218 \uc788\ub2e4\ub294 \uac78 \uc124\uba85\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4. "),(0,s.kt)("p",{parentName:"blockquote"},"\ucc38\uace0: ",(0,s.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/ko/docs/Web/JavaScript/Closures"},"https://developer.mozilla.org/ko/docs/Web/JavaScript/Closures"))))),(0,s.kt)("ol",{start:3},(0,s.kt)("li",{parentName:"ol"},(0,s.kt)("strong",{parentName:"li"},"Does useEffect run after every render?")," ",(0,s.kt)("inlineCode",{parentName:"li"},"useEffect"),"\ub294 default\ub85c \uccab render\uc640 \ubaa8\ub4e0 update\uc774\ud6c4 \uc2e4\ud589\ub429\ub2c8\ub2e4. \ud074\ub798\uc2a4 \ucef4\ud3ec\ub10c\ud2b8\uc5d0\uc11c \ucc98\ub7fc mounting\uacfc updating\uc744 \ub098\ub220 \uc0dd\uac01\ud558\uc9c0 \uc54a\uace0, \uadf8\ub0e5 render\ud568\uc218 \uc2e4\ud589\ub420 \ub54c\ub9c8\ub2e4 (side)effects\uac00 \ubc1c\ud589\ud55c\ub2e4\uace0 \uc0dd\uac01\ud558\uba74 \ub429\ub2c8\ub2e4!!")),(0,s.kt)("h2",{id:"effects-with-cleanup"},"Effects with Cleanup"),(0,s.kt)("p",null," For example, we might want to set up a subscription to some external data source. In that case, it is important to clean up so that we don\u2019t introduce a memory leak!"),(0,s.kt)("p",null," cleanup\uc774 \ud544\uc694\ud55c \ub300\ud45c\uc801\uc778 \uc608\uc2dc\uac00 ",(0,s.kt)("inlineCode",{parentName:"p"},"\uad6c\ub3c5 \uc124\uc815"),"\uc785\ub2c8\ub2e4. \uad6c\ub3c5 \uc124\uc815\uc744 \ud588\uc744 \ub550 \uc5b4\ub5a4 \uc815\ubcf4\uac00 \ubc14\ub014 \ub54c\ub9c8\ub2e4 \uc54c \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub7fc \ubc14\ub00c\uae30 \uc774\uc804\uc758 \uc815\ubcf4\ub294 \ub354 \uc774\uc0c1 \uc815\ubcf4\ub85c\uc11c\uc758 \uac00\uce58\uac00 \uc5c6\uc5b4\uc9d1\ub2c8\ub2e4. \ub610\ud55c \uad6c\ub3c5\uc744 \uba48\ucd98\ub2e4\uba74 \uadf8 \uc804\uc5d0 \uad6c\ub3c5\ud588\ub358 \uc815\ubcf4\ub3c4 \ud544\uc694 \uc5c6\uc5b4 \uc9d1\ub2c8\ub2e4. \uc774\ub7ec\ud55c \ubd88\ud544\uc694\ud55c \uc815\ubcf4\ub294 \uc9c0\uc6cc\uc918\uc57c \uba54\ubaa8\ub9ac\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \uc798 \uc4f8 \uc218 \uc788\uc2b5\ub2c8\ub2e4. "),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"class component with lifecycle methods"),(0,s.kt)("p",{parentName:"li"}," ",(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/75834421/112738108-4bdabe00-8fa3-11eb-832d-43ba91770688.png",alt:"image"})),(0,s.kt)("blockquote",{parentName:"li"},(0,s.kt)("p",{parentName:"blockquote"},"\uc774 \uadf8\ub9bc\uc744 \ub2e4\uc2dc \ubcf4\uba74 \uc6b0\ub9ac\ub294 subscription\uc758 set up \uc989 \uc124\uc815\uc744 ",(0,s.kt)("inlineCode",{parentName:"p"},"componentDidMount")," \uc640 ",(0,s.kt)("inlineCode",{parentName:"p"},"componentWillUnmount")," \ub85c \ud560 \uc218 \uc788\ub2e4\ub294 \uac78 \uc54c \uc218 \uc788\uc2b5\ub2c8\ub2e4. cleanup \uacfc\uc815\uc744 ",(0,s.kt)("inlineCode",{parentName:"p"},"componentWillUnmount"),"\ub85c \ud558\ub294 \uac81\ub2c8\ub2e4!")))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"\uc608\ub97c \ub4e4\uc5b4, \uce5c\uad6c\uc758 \uc628\ub77c\uc778 \uc0c1\ud0dc\ub97c \uc54c \uc218 \uc788\uac8c \ud574\uc8fc\ub294 ChatAPI module\uc788\ub2e4\uace0 \uc0dd\uac01 \ud588\uc744 \ub54c \n\n```jsx\nclass FriendStatus extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { isOnline: null };\n        this.handleStatusChange = this.handleStatusChange.bind(this);\n    }\n\n    componentDidMount() {\n        ChatAPI.subscribeToFriendStatus(\n        this.props.friend.id,\n        this.handleStatusChange\n        );\n    }\n    componentWillUnmount() {\n        ChatAPI.unsubscribeFromFriendStatus(\n        this.props.friend.id,\n        this.handleStatusChange\n        );\n    }\n    handleStatusChange(status) {\n        this.setState({\n        isOnline: status.isOnline\n        });\n    }\n\n    render() {\n        if (this.state.isOnline === null) {\n        return 'Loading...';\n        }\n        return this.state.isOnline ? 'Online' : 'Offline';\n    }\n}\n```\n\n\ucf54\ub4dc\uc5d0\uc11c \ubcf4\uba74 \uc54c \uc218 \uc788\ub4ef\uc774 \uac70\uc758 \ube44\uc2b7\ud55c \uc791\uc5c5\uc744 `componentDidMount`\uc640 `componentWillUnmount`\ub85c \ub098\ub220\uc11c \ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4. \n")),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"useEffect"))),(0,s.kt)("p",null,"\ud55c \ud589\uc704\uc5d0 \ub300\ud574\uc11c \ub354\ud558\uace0 \uc81c\uac70\ud558\ub294 \uac74 \uc644\uc804\ud788 \uc5f0\uad00\ub418\uc5b4 \uc788\ub294 \uac70\ub77c \ub530\ub85c \ubd84\ub9ac\ud574\ub193\uae30 \ubcf4\ub2e8 ",(0,s.kt)("inlineCode",{parentName:"p"},"useEffect"),"\ub97c \uc0ac\uc6a9\ud574\uc11c \ud558\ub098\ub85c \ubb36\uc5b4\ub193\ub294\uac8c \uc88b\uc2b5\ub2c8\ub2e4. "),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"If your effect returns a function, React will run it when it is time to clean up:")),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},(0,s.kt)("inlineCode",{parentName:"strong"},"useEffect"),"\uc758 \uacb0\uacfc\uac12\uc73c\ub85c \ud568\uc218\ub97c \ubc18\ud658\ud558\uba74, \uadf8 \ud568\uc218\ub97c cleanup \ub2e8\uacc4\uc5d0\uc11c \uc2e4\ud589\uc2dc\ud0ac \uc218 \uc788\uc2b5\ub2c8\ub2e4!")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"import React, { useState, useEffect } from 'react';\n\nfunction FriendStatus(props) {\n  const [isOnline, setIsOnline] = useState(null);\n\n  useEffect(() => {\n    function handleStatusChange(status) {\n      setIsOnline(status.isOnline);\n    }\n    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);\n    // Specify how to clean up after this effect:\n    return function cleanup() {\n      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);\n    };\n  });\n\n  if (isOnline === null) {\n    return 'Loading...';\n  }\n  return isOnline ? 'Online' : 'Offline';\n}\n")),(0,s.kt)("p",null,"\uc774\ub807\uac8c ",(0,s.kt)("inlineCode",{parentName:"p"},"useEffect"),"\ub97c \ud1b5\ud574 \uad00\ub828\ub41c \uc791\uc5c5\uc744 \ud558\ub098\ub85c \ubb36\uc744 \uc218 \uc788\uace0, \uc774\ub7f0 cleanup\ud568\uc218\ub97c \uc815\uc758\ud568\uc73c\ub85c\uc11c \ub2e4\uc74c \ucc28\ub840\uc758 effect\ub97c \uc2e4\ud589\ud558\uae30 \uc804\uc5d0 \uc774\uc804\uc758 \ub80c\ub354\ub9c1\uc5d0\uc11c \ud30c\uc0dd\ub41c effect \ub610\ud55c \uc815\ub9ac \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. ",(0,s.kt)("inlineCode",{parentName:"p"},"useEffect"),"\ub294 render\ud568\uc218\uac00 \uc2e4\ud589 \ub420\ub54c \ub9c8\ub2e4 \uac19\uc774 \uc2e4\ud589\ub418\ubbc0\ub85c \uc774\ub7ec\ud55c cleanup \uc791\uc5c5\ub3c4 \ub54c\ub9c8\ub2e4 \uc2e4\ud589\uc774 \ub418\uc5b4\uc57c \ubc84\uadf8\ub3c4 \ubc29\uc9c0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. "),(0,s.kt)("p",null,"\ud83d\udc40 \ub9cc\uc57d\uc5d0 \ub2e4\ub978 \uce5c\uad6c\uc758 \uc628\ub77c\uc778 \uc0c1\ud0dc\ub97c \uc54c\ub824\uace0 \ud558\uba74 \uc5b4\ub5bb\uac8c \ub420\uae4c\uc694? \ud074\ub798\uc2a4 \ucef4\ud3ec\ub10c\ud2b8\uc758 \uacbd\uc6b0 \uc6d0\ub798 \uad6c\ub3c5\ud558\uace0 \uc788\ub358 \uce5c\uad6c\ub97c unsubscribe\ud558\uace0 \uc0c8\ub85c\uc6b4 \uce5c\uad6c\ub97c subscribe \ud558\uae30\uc704\ud574 ",(0,s.kt)("inlineCode",{parentName:"p"},"componentDidUpdate"),"\uae4c\uc9c0 \ucd94\uac00\ud574 \uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4."),(0,s.kt)("p",null,"\ud558\uc9c0\ub9cc ",(0,s.kt)("inlineCode",{parentName:"p"},"useEffect"),"\ub97c \uc774\uc6a9\ud558\uba74 \uc55e\uc11c \uc124\uba85\ud55c \ucf54\ub4dc\uc640 \ub3d9\uc77c\ud569\ub2c8\ub2e4. "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"// Mount with { friend: { id: 100 } } props\nChatAPI.subscribeToFriendStatus(100, handleStatusChange);     // Run first effect\n\n// Update with { friend: { id: 200 } } props\nChatAPI.unsubscribeFromFriendStatus(100, handleStatusChange); // Clean up previous effect\nChatAPI.subscribeToFriendStatus(200, handleStatusChange);     // Run next effect\n\n// Update with { friend: { id: 300 } } props\nChatAPI.unsubscribeFromFriendStatus(200, handleStatusChange); // Clean up previous effect\nChatAPI.subscribeToFriendStatus(300, handleStatusChange);     // Run next effect\n\n// Unmount\nChatAPI.unsubscribeFromFriendStatus(300, handleStatusChange); // Clean up last effect\n")),(0,s.kt)("p",null,"\uc774\uc640 \uac19\uc740 \ubcf5\uc7a1\ud55c \uacfc\uc815\uc744 "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"useEffect(() => {\n    // ...\n    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);\n    return () => {\n      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);\n    };\n")),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"useEffect"),"\ub97c \uc774\ub807\uac8c \uc0ac\uc6a9\ud558\uba74 \ud55c\ubc88\uc5d0 \uac00\ub2a5\ud569\ub2c8\ub2e4!!"),(0,s.kt)("h2",{id:"tips-for-using-effects"},"Tips for Using Effects"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"1. Use Multiple Effects to Separate Concerns")),(0,s.kt)("p",null,"\uc608\ub97c \ub4e4\uc5b4 cleanup\uc774 \uad73\uc774 \ud544\uc694\ud558\uc9c0 \uc54a\uc558\ub358 counter\uc640 cleanup\uc774 \ud544\uc694\ud55c subscribe\ub97c \uac19\uc774 \uc0ac\uc6a9\ud558\ub824\uba74 \uc5b4\ub5bb\uac8c \ud574\uc57c\ud560\uae4c\uc694?"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"class component with lifecycle methods"),(0,s.kt)("pre",{parentName:"li"},(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"class FriendStatusWithCounter extends React.Component {\n constructor(props) {\n   super(props);\n   this.state = { count: 0, isOnline: null };\n   this.handleStatusChange = this.handleStatusChange.bind(this);\n }\n\n componentDidMount() {\n   document.title = `You clicked ${this.state.count} times`;\n   ChatAPI.subscribeToFriendStatus(\n     this.props.friend.id,\n     this.handleStatusChange\n   );\n }\n\n componentDidUpdate() {\n   document.title = `You clicked ${this.state.count} times`;\n }\n\n componentWillUnmount() {\n   ChatAPI.unsubscribeFromFriendStatus(\n     this.props.friend.id,\n     this.handleStatusChange\n   );\n }\n\n handleStatusChange(status) {\n   this.setState({\n     isOnline: status.isOnline\n   });\n }\n // ...\n")))),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"useEffect"))),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"function FriendStatusWithCounter(props) {\n  const [count, setCount] = useState(0);\n  useEffect(() => {\n    document.title = `You clicked ${count} times`;\n  });\n\n  const [isOnline, setIsOnline] = useState(null);\n  useEffect(() => {\n    function handleStatusChange(status) {\n      setIsOnline(status.isOnline);\n    }\n\n    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);\n    return () => {\n      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);\n    };\n  });\n  // ...\n}\n")),(0,s.kt)("p",null,"\u2b50 \uc774\ub807\uac8c Hook\uc744 \uc0ac\uc6a9\ud558\uba74 lifecycle\uc774 \uc544\ub2cc ",(0,s.kt)("strong",{parentName:"p"},"\uc5b4\ub5a4 \uc77c\uc744 \uc218\ud589\ud558\ub294 \uc9c0\uc5d0 \ucd08\uc810\uc744 \ub450\uace0")," \ucf54\ub4dc\ub97c \uc791\uc131\ud560 \uc218 \uc788\uc5b4\uc694!!"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"2. Optimizing Performance by Skipping Effects")),(0,s.kt)("p",null,"rerendering\uc774 \ub420 \ub54c\ub9c8\ub2e4 ",(0,s.kt)("inlineCode",{parentName:"p"},"useEffect"),"\uac00 \uc2e4\ud589\ub418\uc11c effect\ub97c \ucd94\uac00\ud558\uac70\ub098 \uc81c\uac70\ud558\ub294\uac8c \ud37c\ud3ec\uba3c\uc2a4 \ubb38\uc81c\ub97c \uc77c\uc73c\ud0ac \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub798\uc11c \uc6b0\ub9ac\ub294 \ud2b9\uc815 \ubd80\ubd84\uc774 \ubcc0\ud560 \ub54c\ub9cc effect\ub97c \uc2e4\ud589\ud558\ub3c4\ub85d \uc870\uac74\uc744 \uc124\uc815 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"useEffect(() => {\n  function handleStatusChange(status) {\n    setIsOnline(status.isOnline);\n  }\n\n  ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);\n  return () => {\n    ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);\n  };\n}, [props.friend.id]); // Only re-subscribe if props.friend.id changes\n")),(0,s.kt)("blockquote",null,(0,s.kt)("p",{parentName:"blockquote"},"\u2757 \uc774 \ucd5c\uc801\ud654 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud560 \ub54c\ub294 ",(0,s.kt)("strong",{parentName:"p"},"\ubc30\uc5f4\uc774 \ucef4\ud3ec\ub10c\ud2b8 \ubc94\uc704\ub0b4\uc5d0\uc11c \ubc14\ub00c\ub294 \uac12\ub4e4\uacfc effect\uc5d0 \uc758\ud574 \uc0ac\uc6a9\ub418\ub294 \uac12\ub4e4\uc744 \ubaa8\ub450 \ud3ec\ud568\ud574\uc57c\ud569\ub2c8\ub2e4.")," \uadf8\ub807\uc9c0 \uc54a\uc73c\uba74 \uc774\uc804 \ub80c\ub354\ub9c1 \uac12\uc744 \ucc38\uace0\ud558\uac8c \ub429\ub2c8\ub2e4.")))}p.isMDXComponent=!0}}]);